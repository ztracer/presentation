function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/slidev/shiki-0GSutpBo.js","assets/monaco/bundled-types-Ccmk4N9V.js","assets/modules/vue-BLmQdX0u.js","assets/modules/file-saver-DY7lxZlc.js","assets/monaco/bundled-types-CFoY-kCx.css","assets/modules/shiki-vbwtq7uO.js","assets/modules/shiki-BSchMNmt.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{k as Y,_ as D,h as Z,l as W,j as w}from"../monaco/bundled-types-Ccmk4N9V.js";import{d as B,t as v,E as G,o as i,b as l,a6 as X,y as U,Q as ee,D as te,e as q,x as $,H as S,F as O,Z as H,c as K,i as ne,g as z,h as Q,l as I,k as oe,_ as re,n as L}from"../modules/vue-BLmQdX0u.js";import{l as A}from"../lz-string-BTt4z63d.js";import{_ as V,u as ie,A as F}from"../index-B_itl62A.js";import{B as se}from"../modules/unplugin-icons-BaoYVvhx.js";import{u as ae}from"./context-DCcASDl6.js";import{I as le}from"./IconButton-ChrORvDW.js";const ue=[],ce=Y(async()=>{const u={javascript:P,js:P,typescript:J,ts:J},{shiki:t,themes:n}=await D(()=>import("./shiki-0GSutpBo.js"),__vite__mapDeps([0,1,2,3,4,5,6])),h=await t,C=(c,p,e={})=>h.codeToHtml(c,{lang:p,theme:typeof n=="string"?n:Z.value?n.dark||"vitesse-dark":n.light||"vitesse-light",...e}),f=async(c,p,e)=>{try{const o=u[p];if(!o)throw new Error(`Runner for language "${p}" not found`);return await o(c,{options:e,highlight:C,run:async(m,r)=>await f(m,r,e)})}catch(o){return console.error(o),{error:`${o}`}}};for(const c of ue){const p=await c(u);Object.assign(u,p)}return{highlight:C,run:f}});async function P(u){const t=[],n={},h=function(...e){t.push(e.map(f))};n.info=n.log=n.debug=n.warn=n.error=h,n.clear=()=>t.length=0;const C=Object.assign({},console,n);try{const e=`return async (console) => {${p(u)}}`;await new Function(e)()(C)}catch(e){return{error:`ERROR: ${e}`}}function f(e){return typeof e=="string"?{text:e}:{text:c(e),highlightLang:"javascript"}}function c(e){var m;let o="";if(e instanceof Error)o=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")o=String(e);else if(Array.isArray(e))o=`[${e.map(c).join(", ")}]`;else if(e instanceof Set){const r=[...e];o=`Set (${e.size}) {${r.map(c).join(", ")}}`}else if(e instanceof Map){const r=[...e.entries()];o=`Map (${e.size}) {${r.map(([g,y])=>`${c(g)} => ${c(y)}`).join(", ")}}`}else if(e instanceof RegExp)o=e.toString();else if(typeof e=="string")o=JSON.stringify(e);else if(typeof e=="object"){const r=((m=e.constructor)==null?void 0:m.name)??"",g=r&&r==="Object"?"":r;o=(g?`${g}: `:"")+JSON.stringify(e,(b,d)=>d===void 0?"__undefined__":d,2).replace(/"__undefined__"/g,"undefined"),o=String(o)}else o=String(e);return o}function p(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return t}let R;async function J(u,t){const{transpile:n}=R??(R=await D(()=>import("../monaco/bundled-types-Ccmk4N9V.js").then(h=>h.t),__vite__mapDeps([1,2,3,4])));return u=n(u,{module:R.ModuleKind.ESNext,target:R.ScriptTarget.ES2022}),await t.run(u,"javascript")}const de=B({__name:"DomElement",props:{element:{type:null,required:!0}},setup(u){const t=u,n=v();return G(()=>{n.value&&n.value.appendChild(t.element)}),(h,C)=>(i(),l("div",{ref_key:"container",ref:n},null,512))}}),pe=V(de,[["__file","D:/slidev/test/node_modules/@slidev/client/internals/DomElement.vue"]]),fe={key:0,class:"text-sm text-center opacity-50"},me={key:1,class:"text-sm text-center opacity-50"},he={key:2,class:"text-sm text-center opacity-50"},ge=["innerHTML"],_e={key:1,class:"text-red-500"},ve={key:3,class:"output-line"},ye=["innerHTML"],be={key:2,class:"separator"},xe={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},Ce=B({__name:"CodeRunner",props:{modelValue:{type:String,required:!0},lang:{type:String,required:!0},autorun:{type:[Boolean,String],required:!0},height:{type:String,required:!1},highlightOutput:{type:Boolean,required:!0},runnerOptions:{type:Object,required:!1}},emits:["update:modelValue"],setup(u,{emit:t}){const n=u,h=t,{isPrintMode:C}=ie(),f=X(n,"modelValue",h),{$renderContext:c}=ae(),p=U(()=>!["slide","presenter"].includes(c.value)),e=C.value?"once":n.autorun,o=v(e),m=ee(),r=v(0),g=v(),y=W(200,async()=>{if(p.value)return;const{highlight:b,run:d}=await ce();g.value=b;const x=setTimeout(()=>{o.value=!0},500);m.value=w(await d(f.value,n.lang,n.runnerOptions??{})),r.value+=1,o.value=!1,clearTimeout(x)});return e==="once"?y():e&&te(f,y,{immediate:!0}),(b,d)=>{var k;const x=se;return i(),l(O,null,[q("div",{class:"relative flex flex-col rounded-b border-t border-main",style:Q({height:n.height}),"data-waitfor":".slidev-runner-output"},[p.value?(i(),l("div",fe,' Code is disabled in the "'+$(S(c))+'" mode ',1)):o.value?(i(),l("div",me," Running... ")):(k=m.value)!=null&&k.length?(i(),l("div",{key:`run-${r.value}`,class:"slidev-runner-output"},[(i(!0),l(O,null,H(m.value,(s,M)=>(i(),l(O,{key:M},["html"in s?(i(),l("div",{key:0,innerHTML:s.html},null,8,ge)):"error"in s?(i(),l("div",_e,$(s.error),1)):"element"in s?(i(),K(pe,{key:2,element:s.element},null,8,["element"])):(i(),l("div",ve,[(i(!0),l(O,null,H(S(w)(s),(a,_)=>(i(),l(O,{key:_},[a.highlightLang&&g.value?(i(),l("span",{key:0,class:"highlighted",innerHTML:g.value(a.text,a.highlightLang)},null,8,ye)):(i(),l("span",{key:1,class:ne(a.class)},$(a.text),3)),_<S(w)(s).length-1?(i(),l("span",be,",")):z("v-if",!0)],64))),128))]))],64))),128))])):(i(),l("div",he," Click the play button to run the code "))],4),S(f).trim()?(i(),l("div",xe,[I(le,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:S(y)},{default:oe(()=>[I(x)]),_:1},8,["onClick"])])):z("v-if",!0)],64)}}}),Se=V(Ce,[["__file","D:/slidev/test/node_modules/@slidev/client/internals/CodeRunner.vue"]]),ke={class:"relative slidev-monaco-container"},Ee=B({__name:"Monaco",props:{codeLz:{type:String,required:!0,default:""},diffLz:{type:String,required:!1},lang:{type:String,required:!1,default:"typescript"},readonly:{type:Boolean,required:!1,default:!1},lineNumbers:{type:String,required:!1,default:"off"},height:{type:[Number,String],required:!1,default:"initial"},editorOptions:{type:null,required:!1},ata:{type:Boolean,required:!1,default:!0},runnable:{type:Boolean,required:!1,default:!1},autorun:{type:[Boolean,String],required:!1,default:!0},outputHeight:{type:String,required:!1},highlightOutput:{type:Boolean,required:!1,default:!0},runnerOptions:{type:Object,required:!1}},setup(u){const t=u,n=v(A.decompressFromBase64(t.codeLz).trimEnd()),h=t.diffLz&&v(A.decompressFromBase64(t.diffLz).trimEnd()),f={ts:"typescript",js:"javascript"}[t.lang]??t.lang,p={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[t.lang]??t.lang,e=v(),o=v(),m=v(0),r=v(),g=U(()=>t.height==="auto"?`${m.value}px`:t.height==="initial"?`${r.value}px`:t.height);return re(async()=>{const{default:y}=await D(()=>import("../monaco/bundled-types-Ccmk4N9V.js").then(a=>a.p),__vite__mapDeps([1,2,3,4])),{ata:b,monaco:d}=await y(),x=d.editor.createModel(n.value,f,d.Uri.parse(`file:///${F()}.${p}`));x.onDidChangeContent(()=>n.value=x.getValue());const k={automaticLayout:!0,readOnly:t.readonly,lineNumbers:t.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontSize:11.5,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,...t.editorOptions};let s;if(h){const a=d.editor.createModel(h.value,f,d.Uri.parse(`file:///${F()}.${p}`));a.onDidChangeContent(()=>n.value=x.getValue());const _=d.editor.createDiffEditor(o.value,{renderOverviewRuler:!1,...k});_.setModel({original:x,modified:a});const E=_.getOriginalEditor(),j=_.getModifiedEditor(),N=()=>{const T=Math.max(E.getContentHeight(),j.getContentHeight())+4;r.value??(r.value=T),m.value=T,L(()=>_.layout())};E.onDidContentSizeChange(N),j.onDidContentSizeChange(N),s=j}else{const a=d.editor.create(o.value,{model:x,lineDecorationsWidth:0,...k});a.onDidContentSizeChange(_=>{const E=_.contentHeight+4;r.value??(r.value=E),m.value=E,L(()=>s.layout())}),s=a}t.ata&&(b(s.getValue()),s.onDidChangeModelContent(W(1e3,()=>{b(s.getValue())})));const M=s.layoutContentWidget.bind(s);s.layoutContentWidget=a=>{M(a),a.getId()==="editor.contrib.resizableContentHoverWidget"&&(a._resizableNode.domNode.style.transform=a._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},L(()=>d.editor.remeasureFonts())}),(y,b)=>(i(),l("div",ke,[q("div",{ref_key:"outer",ref:e,class:"relative slidev-monaco-container-inner",style:Q({height:g.value})},[q("div",{ref_key:"container",ref:o,class:"absolute inset-0.5"},null,512)],4),t.runnable?(i(),K(Se,{key:0,modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=d=>n.value=d),lang:S(f),autorun:t.autorun,height:t.outputHeight,"highlight-output":t.highlightOutput,"runner-options":t.runnerOptions},null,8,["modelValue","lang","autorun","height","highlight-output","runner-options"])):z("v-if",!0)]))}}),qe=V(Ee,[["__file","D:/slidev/test/node_modules/@slidev/client/builtin/Monaco.vue"]]);export{qe as _};
